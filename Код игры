#include <iostream>
#include <Windows.h>
#include <fstream>//Библиотека ввода-вывода в файлы
#include <conio.h>//Для _getch и пары полезных функций
#include <cstdlib>//В основном для генерации случайных чисел
#include <ctime>//Для работы со временем
#include <stdio.h>//Для многопоточности
using namespace std;
int zpch[4], k[2][5], timer, f, z, live, E, rok, gens, kred, As, o, u, Ent, Ent2, rec[3], kv[2], BM, weap, re[2], boss, zbs, sh, h, Slg;//Переменные типа int описываются по ходу
char s, r[9], man[3][20];//нажатая клавиша, имя файла, записи рекордов
void ast(), kor(), OsMeh(), time(), mag(), sist(), ftl();//Функции. Обявлены ниже
int main() {setlocale (LC_ALL, "RUS");
SetConsoleCP(1251);
SetConsoleOutputCP(1251);//Эти три функции позволяют использовать кирилицу в консоли
srand(time(0));//Коректная работа рандомайза
while (1==1){for(int i=0;i<5;i++)k[0][i]=0;//Обнуление переменных
	for(int i=0;i<5;i++)k[1][i]=0;//Переменная К - это положение астероидов на поле
	Ent=0;//Переменная Ent отвечает за выбор в меню (Ent - Enter)
	BM=0;//Проверка на секретный режим разработчика (BM - Batman)
	weap=1;//Переменная weap отвечает за используемое оружие (weap - weapon)
	gens = 0;//Кол-во генераторов щитов (gens - generators)
	u=0;//Переменная "Во все дырки затычка", используется по необходимости где угодно
	z=0;//Нажатая клавиша, переведённая в тип int
	zbs=100;//Здоровье босса (Zdorovye BoSsa)
	f=2;//Положение коробля на поле (2 - это середина(0|1|2|3|4))
	o=-20;//Очки, набираемые игроком (-20, потому что первые два такта игры астероиды ещё не долетели до игрока)
	live=3;//Кол во жизней игрока
	while (Ent!=1){system("cls");//Игровое меню. Пока игрок не выбрал один из вариантов, меню будет обновляться
		cout << " Для начала игры выберите уровень, для управления используйте клавиши W, A, S, \n";//Описание управления
		cout << " D, для стрельбы и выбора - пробел, для остановки игры нажмите E, для паузы - Q \n";
		cout << "                 Стрельба возможна, если у вас есть энергия. \n";
		cout << "      Ловите сердечки, чтобы восстановить жизни и аккумуляторы для энергии. \n";
		cout << "                                 Приятной игры!!! \n";
		cout << " \n";
		cout << " \n";
		cout << " \n";
		cout << "                              Выберите уровень игры: \n";//Перечень уровней игры, переменная u обозначает местонахождение корретки
		cout << " \n";
		if (u == 0) cout << "                        -->  Выгнали из лётной школы  <-- \n";
		else cout << "                             Выгнали из лётной школы \n";
		if (u == 1) cout << "                        --> Был за штурвалом и выжил! <-- \n";
		else cout << "                            Был за штурвалом и выжил! \n";
		if (u == 2) cout << "                        -->         Да я ас!!!        <-- \n";
		else cout << "                                    Да я ас!!! \n";
		if (u == 3) cout << "                        --> Я Хан, мать его, Соло!!!  <-- \n";
		else cout << "                            Я Хан, мать его, Соло!!! \n";
		if (u == 4) cout << "                        -->       Выход из игры       <-- \n";
		else cout << "                                  Выход из игры \n";
		s = _getch();//Ввод одной клавиши
		if(static_cast<int>(s) == -10 || static_cast<int>(s) == 119) u--;//Если нажата клавиша w, коретка перемещается вверх
		else if(static_cast<int>(s) == -5 || static_cast<int>(s) == 115) u++;//Иначе если s, то вниз
			else if (static_cast<int>(s) == -63 || static_cast<int>(s) == 66){//Если нажата кловиша Б или B, включается секретный режим
				u = 66;//Признак работы режима БМ
				Ent++;//Выход из меню
				}
				else if(GetAsyncKeyState(VK_SPACE)) Ent++;//Иначе, если нажат пробел, выходим из меню
		if (u == 5) u--;//Если корретка ушла слишком сильно вниз, вернуть на самое нижнее возможное положение
		if (u == -1) u++;//А если слишком сильно вверх, то на самое верхнее
	}//Конец меню
	system("cls");//Очистить игровое поле
	if (u == 4)return 0;//Если корретка остановилась на "Выходе", закрыть программу
	if (u != 66){cout << " Добро пожаловать в игру. Вы решили поиграть не в самое счастливое время. Наша \n";//Если не включен режим БМ, то ввод сюжета
		cout << "    голактика подверглась атаке новой рассой. Их коробли представляют собой    \n";
		cout << "    ужасающую смесь металла и хитина. Нам не известно, появилась эта расса     \n";
		cout << "  естественным путём или была выведена специально. Однако опасность этой рассы \n";
		cout << "   беспрецедентна. Вы являетесь пилотом межзвёздного коробля «Стрела». Этот    \n";
		cout << "  корабль - творение новейших технологий. Гиперпривод позволяет путешествовать \n";
		cout << "  между системами с немыслимой скоростью, а орудия способны прорезать панцирь  \n";
		cout << "      противника. Ваша задача - Добраться до матки Жуков и уничтожить её.      \n";
		cout << " Это обеспечит безопастность всей голактике. Пройдите пояса астероидов и земли,\n";
		cout << "захваченые жуками, но постарайтесь сохранить человечность и не потерять себя в \n";
		cout << "                                  пламени войны...                             \n"<<"\n"<<"\n"<<"\n";
		cout << "      Управление: A - двигать корабль в лево, D - двигать корабль вправо       \n";
		cout << "        WASD - перемещение по меню и магазину, ПРОБЕЛ - выбор, выстрел         \n";
		cout << "                         Q - пауза, E - выход, С - щит                         \n";
	}
	switch (u){//Если корретка остановилась на...
		case 0: {E = 15;//Лёгком уровне, кол-во энергии = 15 (E - energy)
			sh = 50;//Шанс выпада жизней, энергии и успешной обчистки коробля (sh - shans)
			Slg = 400;//Количество астероидов, которое нужно преодолеть на пути от одной системы к другой (Slg - slognost)
			break;}
		case 1: {E = 5;//Средний уровень
			sh = 75;
			Slg = 450;
			break;}
		case 2: {E = 10;//Сложный
			sh = 100;
			Slg = 550;
			break;}
		case 3: {E = 0;//Кошмарный
			sh = 150;
			Slg = 650;
			break;}
		case 66: {BM=1;//Режим БМ
			sh = 50;
			Slg = 400;
			live=10;
			cout << "                  Выбран секретный режим <<I AM BATMAN!!!>> \n";
			cout << "              Здравствуйте, милорд. Орудия заряжены до отказа!!! \n";
			cout << "                          Разнесите всё к чертям!!! \n";
			break;
		}
	}
	char r[9] = {'r','e','c', u +'0','.','t','x','t'};//Обьявляем название файла для записи рекордов
	_getch();
	sist();//Отображение звёздной карты
	s=0;//Обнулить некоторые переменные
	u=0;
	while(live>0 && z != 101){system("cls");//Пока игрок не нажал "выход" и не умер, повторять:
		OsMeh();//OsMeh - основная механика игры. Описана ниже. Генерирует астероиды, рисует корабль и тд.
		time();//Функция, обеспечивающая смену кадров и ход игрока. Описана ниже
		if(o==Slg+10||o==Slg*2+210||o==Slg*4+810){if(o==Slg+10){system("cls");//Если мы дошли до минибосса, то: если это пират, то:
				cout << "Вы проходите пояс астероидов и чувствуете облегчение. Когда впереди показалась \n";//Сюжеточка
				cout << "планета, пригодная для отдыха и ремонта, Ваш путь преградил массивный корабль. \n";
				cout << "    Попытки выйти с ним на связь ни к чему не приводят, однако вы замечаете    \n";
				cout << " пиратскую символику на обшивке. Кто бы сомневался... (Вы отмечаете необычное  \n";
				cout << "   строение корпуса противника. Вероятно, он медлителен, но обладает большой   \n";
				cout << "                                   прочностью)                                 \n";
				for (int i = 6; i > 0; i--)cout << " \n";
				kor();//Функция korтрисует корабль игрока и всё, что рядом с ним
				_getch();
				zbs=7;//Установим количество жизней пирата
				system("cls");
			}
			else if(o==Slg*2+210){system("cls");//Иначе, если бабочки, то:
					cout << "  Вы добираетесь до следующей системы. Нашествие добралось и сюда. Вы видите   \n";//Сюжеточка
					cout << " два истребителя класса <<Бабочка>>. Если ничего не предпринять, они разорят   \n";
					cout << " всю систему! Не теряя ни минуты, вы направляетесь на перехват. Заметив вас,   \n";
					cout << "                         жуки меняют курс. К оружию!                           \n";
					for (int i = 8; i > 0; i--)cout << " \n";
					kor();//Корабль
					_getch();
					zbs=3;//Жизни первой твари
					u=3;//Временно используется как жизни второй твари
					system("cls");
				}
				else if (o==Slg*4+810){system("cls");//Иначе если пчела, то:
						cout << "   Вы подлетаете к последней уцелевшей планете. Штурм идёт полным ходом! Её    \n";//Сюжет
						cout << " осаждают крейсеры класса «Пчела»! Уничтожте всех и, на время, спасёте планету \n";
						cout << "                                от уничтожения!                                \n";
						for (int i = 9; i > 0; i--)cout << "\n";
						kor();//корабль
						_getch();
						zbs=15;//Жизни всех тварей
						system("cls");
					}
			boss=2;//Положение босса в пространстве. Установить на середину
			while (zbs>0&&live>0&&z!=101||live>0&&z!=101&&u>0){//Пока босс жив:
				if (weap!=2&&E==0&&timer==0)E++;//Усли кончились боеприпасы, подкинуть
				if (weap>1&&rok==0&&timer==0)rok++;
				cout << "Кредитов: " << kred << "                 Время работы щита: " << As << "                Очки: " << o << " \n      ";//Верхняя информативная панель
				for (int i=0; i<5; i++)if (i == boss&&o==Slg+10)cout << " _        _  ";//Проходим по столбцам игрового поля. Если поле не пустое и там босс,
					else if (i == boss&&o==Slg*4+810)cout << "    /---\\    ";//То взависимости от того, какой именно, выводим соответствующие текстурки
						else if (i == boss-1 && zbs> 0 && o == Slg*2+210 || i == boss+1 && u>0 && o==Slg*2+210) cout << "  //\\/|\\/\\\\  ";
							else if (i == f && z == 32) if (weap == 1)cout << " |         | ";//Иначе, если там выстрел играка и оружие лазерное, выводим лазеры
								else cout << " ^         ^ ";//Если кинетичечкое, то ракеты
									else cout << "             ";//если пусто, то... выводим пустоту, как ни странно
				cout << "\n      ";
				for (int i=0; i<5; i++)if (i == boss&&o==Slg+10) cout << "||| ____ ||| ";//Тут то же самое, лень повторять
					else if (i == boss&&o==Slg*4+810)cout << "   /|   |\\   ";
						else if (i == boss-1 && zbs>0  && o == Slg*2+210|| i == boss+1 && u>0 && o == Slg*2+210) cout << "  \\\\\\\\|////  ";
							else if (i == f && z == 32)if (weap == 1)cout << " |         | ";
									else cout << " ^         ^ ";
								else cout << "             ";
				cout << "\n      ";
				for (int i=0; i<5; i++)if (i == boss&&o==Slg+10) cout << "|||///\\\\\\||| ";//То же самое
					else if (i == boss&&o==Slg*4+810)cout << "\\-|*|---|*|-/";
						else if (i == boss-1 && zbs>0 && o == Slg*2+210 || i == boss+1 && u>0 && o == Slg*2+210) cout << "   \\\\/|\\//   ";
							else if (i == f && z == 32)if (weap == 1)cout << " |         | ";
									else cout << " ^         ^ ";
								else cout << "             ";
				cout << "\n      ";
				for (int i=0; i<5; i++)if (i == boss&&o==Slg+10) cout << " \\\\\\\\\\/////  ";//То же самое
					else if (i == boss&&o==Slg*4+810)cout << " \\|*|---|*|/ ";
						else if (i == boss-1 && zbs>0  && o == Slg*2+210|| i == boss+1 && u>0 && o == Slg*2+210) cout << "   //\\|/\\\\   ";
							else if (i == f && z == 32)if (weap == 1)cout << " |         | ";
									else cout << " ^         ^ ";
								else cout << "             ";
				cout << "\n      ";
				for (int i=0; i<5; i++)if (i == boss&&o==Slg+10) cout << " |-|/--\\|-|  ";//То же самое
					else if (i == boss&&o==Slg*4+810)cout << " /\\*|---|*/\\ ";
						else if (i == boss-1 && zbs>0  && o == Slg*2+210|| i == boss+1 && u>0 && o == Slg*2+210) cout << "  ////|\\\\\\\\  ";
							else if (i == f && z == 32)if (weap == 1)cout << " |         | ";
									else cout << " ^         ^ ";
								else cout << "             ";
				cout << "\n      ";
				for (int i=0; i<5; i++)if (i == boss&&o==Slg+10) cout << "/|-|\\__/|-|\\ ";//То же самое
					else if (i == boss&&o==Slg*4+810)cout << " \\ \\/***\\/ / ";
						else if (i == boss-1 && zbs>0  && o == Slg*2+210|| i == boss+1 && u>0 && o == Slg*2+210) cout << "  \\\\/\\^/\\//  ";
							else if (i == f && z == 32)if (weap == 1)cout << " |         | ";
									else cout << " ^         ^ ";
								else cout << "             ";
				cout << "\n      ";
				for (int i=0; i<5; i++)if (i == boss&&o==Slg+10){if (timer == 1) cout << "||-|/--\\|-|| ";//Тут лёгкие изменения. Если пират стреляет, выводим эту строку
						else cout << "\\|-|/--\\|-|/ ";}//Если пират не стреляет, эту
					else if (i == boss&&o==Slg*4+810){if (z == 32 && i == f) if (weap == 1) cout << " |  |\\^/|  | ";//Если игрок стреляет в пчелу лазером, эту
								else cout << " ^  |\\^/|  ^ ";//Ракетами, эту
							else if (timer == 1) cout << "  \\ |\\^/| /  ";//Если никто не стреляет, эту
								else cout << "    |\\^/|    ";}//Если босс стреляет, эту
						else if (i == f && z == 32)if (weap == 1)cout << " |         | ";//Если игрок стреляет лазером в пустоту, эту
								else cout << " ^         ^ ";//Ракеты в пустоту, эта
							else if (i == boss-1&&zbs>0&&timer == 1 && o == Slg*2+210||i == boss+1&&u>0&&timer == 1 && o == Slg*2+210)cout << "   \\  |  /   ";//Если стреляет бабочка, эту
								else cout << "             ";//Иначе пустота...
				cout << "\n      ";
				for (int i=0; i<5; i++)if (i == boss&&o==Slg+10) {if (z == 32 && i == f) if (weap == 1)cout << " \\^/[\\/]\\^/| ";//Ещё усложнение. ВВодим возможность выстрела игрока
							else cout << " \\^/[\\/]\\^/^ ";
						else if (timer == 1) cout << "|\\^/[\\/]\\^/| ";
							else cout << " \\^/[\\/]\\^/  ";}
						else if (z == 32 && i == f) if (weap == 1) cout << " |         | ";
								else cout << " ^         ^ ";
							else if (i == boss&&o==Slg*4+810&&timer == 1) cout << "   \\|   |/   ";
								else if (i == boss-1&&zbs>0&&timer == 1 && o == Slg*2+210||i == boss+1&&u>0&&timer == 1 && o == Slg*2+210)cout << "    \\ | /    ";
									else if (i == f && z == 32)if (weap == 1)cout << " |         | ";
											else cout << " ^         ^ ";
										else cout << "             ";
				cout << "\n      ";
				for (int i=0; i<5; i++)if (i == boss&&o==Slg+10) {if (z == 32 && i == f) if (weap == 1)cout << " |   \\/    | ";//Немного упрощается. Пчела или бабочка уже прорисована, 
							else cout << " ^   \\/    ^ ";//Так что прорисовываем только их выстрелы
						else if (timer == 1) cout << "| |  \\/  | | ";
							else cout << "     \\/      ";}
						else if (z == 32 && i == f) if (weap == 1) cout << " |         | ";
								else cout << " ^         ^ ";
							else if (i == boss&&o==Slg*4+810&&timer == 1) cout << "    |   |    ";
								else if (i == boss-1&&zbs>0&&timer == 1 && o == Slg*2+210||i == boss+1&&u>0&&timer == 1 && o == Slg*2+210)cout << "     \\|/     ";
									else if (i == f && z == 32)if (weap == 1)cout << " |         | ";
											else cout << " ^         ^ ";
										else cout << "             ";
				cout << "\n      ";
				if (timer == 1 || z == 32){//Здесь прорисовываются только залпы орудий, если они есть
					for (int i=0; i<5; i++)if (i == f && z == 32)if (weap == 1)cout << " |         | ";
							else cout << " ^         ^ ";
						else if (i == boss && timer == 1&&o==Slg+10) cout << "| |      | | ";
							else if (i == boss&&o==Slg*4+810&&timer == 1)cout << "    |   |    ";
								else if (i == boss-1&&zbs>0&&timer == 1 && o == Slg*2+210||i == boss+1&&timer==1&&u>0 && o == Slg*2+210)cout << "      |      ";
									else cout << "             ";}
				cout << "\n      ";
				if (timer == 1 || z == 32){//То же самое
					for (int i=0; i<5; i++)if (i == f && z == 32)if (weap == 1)cout << " |         | ";
							else cout << " ^         ^ ";
						else if (i == boss && timer == 1&&o==Slg+10) cout << "| |      | | ";
							else if (i == boss&&o==Slg*4+810&&timer == 1) cout << "    |   |    ";
								else if (i == boss-1&&zbs>0 && o == Slg*2+210&&timer==1||i == boss+1&&timer==1&&u>0 && o == Slg*2+210)cout << "      |      ";
									else cout << "             ";}
				cout << " \n";
				if (boss == f && z == 32 && o !=Slg*2+210||zbs!=0&&boss-1==f && z == 32 && o ==Slg*2+210)zbs-=weap;//Если по боссу попали, снимаем с него ХП
					else if (u!=0&&boss+1==f && z == 32 && o ==Slg*2+210)u-=weap;//Если попали по второй бабочке, вычитаем её ХП
						else if (boss == f && timer==1 && As == 0 && o != Slg*2+210 && zbs>0|| boss-1 == f && zbs>0 && timer==1 && As == 0 && o == Slg*2+210 || boss+1 == f && u>0 && timer==1 && As == 0 && o == Slg*2+210)live--;//Если попали по игроку, снимаем хп с него
				kor();//Кораблик
				if(zbs%3==0&&o==Slg*4+810&&f==boss&&z==32){system("cls");//Если убили одну из пчёл
					cout << "Кредитов: " << kred << "                 Время работы щита: " << As << "                Очки: " << o << " \n"; 
					for (int i = boss; i > 0; i--)cout << "             ";
					cout << "           ** \\ \n";
					for (int i = boss; i > 0; i--)cout << "             ";
					cout << "         /|*  *\\ \n";
					for (int i = boss; i > 0; i--)cout << "             ";
					cout << "       *|*|--* ** / \n";
					for (int i = boss; i > 0; i--)cout << "             ";
					cout << "       \\|*| *-|* * \n";
					for (int i = boss; i > 0; i--)cout << "             ";
					cout << "       ** |*--|*/* \n";
					for (int i = boss; i > 0; i--)cout << "             ";
					cout << "         \\/** \\  / \n";
					for (int i = boss; i > 0; i--)cout << "             ";
					cout << "          | */ \n"<<"\n"<<"\n"<<"\n"<<"\n";//Ричуем подбитую пчелу
					z=0;
					kor();//Кораблик
					_getch();//Ждём нажатия любой клавиши
					if (zbs==0){kred+=100;//Если убили всех пчёл, +100 кредитов, +500очков
						o+=500;
						ftl();//Функция обыска короблей. Описана ниже
						mag();//Функция магазина. Ниже
						sist();}//Карта
				}
				if (timer==2 && o==Slg+10 || o==Slg*4+810){if (boss<f) boss++;//прорабатываем движение боссов
						else if (boss>f)boss--;}//Пират сдвигается к игроку раз в три такта 
				if (timer==2&&o==Slg*2+210){if(rand()%2==0)boss++;//Бабочка смещается в случайном направлении
					else boss--;
					if (boss==0)boss++;//Ограничение движения босса (чтобы не вышел за экран)
					if (boss==4)boss--;}
				if (timer==2)timer=0;//timer - переменная, отвечающая за отсчёт тактов для боссов (буквально таймер)
				else timer++;
				time();
				if (o!=Slg*2+210&&zbs==0)u=0;//Для корректной работы боссов
			}
			zbs=100;//Для корректной работы нижних информационных панелек
		}
		timer=0;
		if(o==Slg+10){ftl();//Если мы убили пирата, обчищаем его
			system("cls");
			cout << "  Корабль пирата, прорезаный вашим орудием, рассыпается на части. А жаль. Вы   \n";//Сюжет
			cout << "                    подписались убивать Жуков, а не людей...                   \n"; 
			cout << "               С беспокойным сердцем, вы продолжаете свой путь...              \n";
			for (int i = boss; i > 0; i--)cout << "             ";
			cout << "       *|*   __ |** \n";
			for (int i = boss; i > 0; i--)cout << "             ";
			cout << "        || */* \\**  \n";
			for (int i = boss; i > 0; i--)cout << "             ";
			cout << "        \\* **/**/  \n";
			for (int i = boss; i > 0; i--)cout << "             ";
			cout << "        |-|/--*|    \n";
			for (int i = boss; i > 0; i--)cout << "             ";
			cout << "         *|\\*_/**  \n";
			for (int i = boss; i > 0; i--)cout << "             ";
			cout << "        |-|/--\\|*  \n";
			for (int i = boss; i > 0; i--)cout << "             ";
			cout << "         **\\*]\\^   \n";
			for (int i = boss; i > 0; i--)cout << "             ";
			cout << "             *    \n"<<"\n";
			z=0;
			kor();
			_getch();//Ждём нажатия любой клавиши
			o+=200;
			kred = kred + 50;//Награда. 200 очков и 50 кредитов
			mag();//Магаз
			sist();//Карта
		}
		else if(o==Slg*2+210){o+=300;//Если убили бабочек, награда. 300 очков и 50 кредитов
			kred = kred + 50;
			ftl();//Обыск
			system("cls");
			cout << "Вы крошите гадов в пыль. Как ни странно, вы даже чувствуете удоволетворение от \n";//Сюжет
			cout << "   содеяного. Однако система в безопасности. Пока... Вы заходите на посадку.   \n";
			for (int i = 10; i > 0; i--)cout << "\n";
			kor();
			_getch();//Ждём нажатия любой клавиши
			mag();//Магаз
			sist();//Карта
		}
		if(o == Slg*3+610){system("cls");//Если прошли из третьей системы в четвёртую
			cout << "  Хоть пространство и заполонили летучие твари, несколько планет ещё способны  \n";//сюжет
			cout << "оборонятся. Как раз на такую вы смогли приземлится. Информации не много, но она\n";
			cout << "очень важна. Щупальца уязвимы для нашего оружия. Уничтожте оба и щит спадёт! Вы\n";
			cout << " направляетесь в систему Вега. Опасность максимальна. Пробейтесь через неё и вы\n"; 
			cout << "                               доберётесь до матки! \n";
			_getch();//Ждём нажатия любой клавиши
			mag();//Магаз
			sist();}//Карта
		if(o==Slg*4+1310){system("cls");//Если добрались до матки
			cout << "    И вот... Она перед вами! Чудовищная смесь металла с огромным насекомым!    \n";//сюжет
			cout << "              Некоторые жуки, заметив ваше приближение к королеве              \n";
			cout << " летят на перехват. У вас мало времени! Вспомните всё, что вам известно, чтобы \n";
			cout << "       разделаться с монстром или умрите в клешнях этих жутких чудовищь.       \n";
			for (int i = 7; i > 0; i--)cout << "\n";
			kor();
			_getch();
			system("cls");
			u=0;
			timer=0;
			zbs=3;
			for(int i=0;i<4;i++)zpch[i]=0;//zpch - переменные, отвечающие за работоспособность отдельных частей босса (zpch - ZaPCHasty)
			while (zbs>0&&live>0&&z!=101){//Пока игрок и босс живы и игрок не вышел из игры
				if (weap!=2&&E==0&&timer==0)E++;//Усли кончились боеприпасы, подкинуть
				if (weap>1&&rok==0&&timer==0)rok++;
				cout << "Кредитов: " << kred << "                 Время работы щита: " << As << "                Очки: " << o << "\n"; 
				cout << "       /|_____\\   /|\\****|****/||___________||\\****|****/|\\   /_____|\\ " << " \n";//Прорисовываем матку
				cout << "      //\\\\  //\\\\_/\\|/\\***|***/\\||\\   /|\\   /||/\\***|***/\\|/\\_//\\\\  //\\\\ " << "\n      ";
				if (boss==2&&timer==1){cout << "|\\/|  |\\/| \\\\|//\\_/_\\_/\\\\|\\ [\\_|||_/] /|//\\_/_\\_/\\\\|// |\\/|  |\\/|" << "\n      ";//если третье оружие стреляет
					cout << "||||  ||||  |_____________/\\ \\_|||_/ /\\_____________|  ||||  ||||"<< "\n      ";
					cout << "||||  |||| / \\/\\/ /^\\ \\/\\///\\__|||__/\\\\\\/\\/ /^\\ \\/\\/ \\ ||||  ||||"<< "\n      ";
				}
				else {cout << "|\\/|  |\\/| \\\\|//\\_/_\\_/\\\\|\\ [\\_____/] /|//\\_/_\\_/\\\\|// |\\/|  |\\/|"<< "\n      ";//Если не стреляет
					cout << "||||  ||||  |_____________/\\ \\_____/ /\\_____________|  ||||  ||||"<< "\n      ";
					cout << "||||  |||| / \\/\\/ /^\\ \\/\\///\\_______/\\\\\\/\\/ /^\\ \\/\\/ \\ ||||  ||||"<< "\n      ";
				}
				if (zpch[1]==0)cout <<"||||/\\||||/   \\ \\      \\ \\";//Если вторая деталь работает
				else cout <<"||||/\\||||/   \\ \\      * *";//Если сломана
				if (boss==2&&timer==1){if (boss==f&&z==32&&zpch[1]+zpch[2]==0){if(weap==1)cout << "||   |||   ||";//Если игрок и третье оружие стреляют одновременно
						else cout << "|^   |||   ^|";}
					else cout << "|    |||    |";}//Если стреляет только оружие
				else {if (2==f&&z==32&&zpch[1]+zpch[2]==2){if(weap==1)cout << "||         ||";//Если только игрок
						else cout << "|^         ^|";}
					else cout << "|           |";}//Если пусто
				if (zpch[2]==0)cout <<"/ /      / /   \\||||/\\||||" <<"\n      ";//Если работает третья деталь
					else cout << "* *      / /   \\||||/\\||||"<<"\n      ";//Сломана
				if (zpch[0]==0){if(f==0&&z==32&&timer==0){if(weap==1)cout << "\\||/  \\||/ | ";//Если игрок стреляет по первой детали
						else cout << "\\||/  \\||/ ^ ";}
					else cout << "\\||/  \\||/   ";}//иначе
				else if(f==0&&z==32){if(weap==1)cout << "\\* *  **|* | ";//Если деталь уничтожена и по ней стреляют
						else cout << "\\* *  **|* ^ ";}
					else cout << "\\* *  **|*   ";//Если просто уничтожена
				if (boss==1&&timer==1) cout<<"  \\ \\      ";//Если второе оружие стреляет
				else {if (1==f&&z==32){if(weap==1)cout << " |         ";//Если игрок стреляет по второй детали
						else cout << " ^         ";}
					else cout << "           ";}//Если пусто
				if (boss==2&&timer==1){if (zpch[1]==0||zpch[2]==0)cout << "\\ \\____|||____/ /";//Если активны щиты и третье оружие стреляет
					else {if (2==f&&z==32){if(weap==1)cout << "   |   |||   |   ";//Если щиты не активны и выстрел обоюдный
							else cout << "   ^   |||   ^   ";}
						else cout << "       |||       ";}//Если стреляет только оружие
				}
				else if (zpch[1]==0||zpch[2]==0)cout << "\\ \\___________/ /";//Если щит активен, выстрела нет
					else {if (2==f&&z==32){if(weap==1)cout << "   |         |   ";//Если Щит не активен, выстрел
							else cout << "   ^         ^   ";}
						else cout << "                 ";}//Если щит не активен, пустота
				if (boss==3&&timer==1) cout << "      / /  ";
				else {if (3==f&&z==32){if(weap==1)cout << "         | ";//Если игрок стреляет в третью деталь
						else cout << "         ^ ";}
					else cout << "           ";}//Иначе
				if (zpch[3]==0){if(4==f&&z==32&&timer==0){if(weap==1)cout << " | \\||/  \\||/"<<"\n      ";//Если игрок стреляет в 4-ую деталь
						else cout << " ^ \\||/  \\||/"<<"\n      ";}
					else cout << "   \\||/  \\||/"<<"\n      ";}//Иначе
				else if(4==f&&z==32) {if(weap==1)cout << " | *|*   * */"<<"\n      ";//Если 4-ая деталь подбита, выстрел
						else cout << " ^ *|*   * */"<<"\n      ";}
					else cout << "   *|*   * */"<<"\n      ";//Если 4-ая деталь подбита
				if (zpch[0]==0){if(0==f&&z==32&&timer==0){if (weap==1)cout << " ||    ^^  | ";//Если в 1-ую деталь стреляют
						else cout << " ||    ^^  ^ ";}
					else cout << " ||    ^^    ";}//Иначе
				else if(0==f&&z==32){if(weap==1)cout << "  *     *  | ";//Если 1-ая разбита и в неё стреляют
						else cout << "  *     *  ^ ";}
					else cout << "  *     *    ";//Иначе
				if (boss==1&&timer==1) cout<<"   \\ \\     ";//Если стреляет 2-ое оружие
				else {if (1==f&&z==32){if(weap==1)cout << " |         ";//Если стреляют по 2-ому оружию
						else cout << " ^         ";}
					else cout << "           ";}//Иначе
				if (boss==2&&timer==1){if (zpch[1]==0||zpch[2]==0)cout << " \\_____|||_____/ ";//Если щит активен, 3-е стреляет
					else {if (2==f&&z==32){if(weap==1)cout << "   |   |||   |   ";//Если щит не активен, выстрел обоюдный
							else cout << "   ^   |||   ^   ";}
						else cout << "       |||       ";}//Если щит не активен, 3-е стреляет
				}
				else if (zpch[1]==0||zpch[2]==0){if (1==f&&z==32&&timer==0&&weap==1)cout << "|\\_____________/ ";//Если щит активен, выстрел во 2-ую деталь
						else if (3==f&&z==32&&timer==0&&weap==1)cout << " \\_____________/|";//Если щит активен, выстрел в 3-ю деталь
							else if (1==f&&z==32&&timer==0&&weap==2)cout << "^\\_____________/ ";
								else if (3==f&&z==32&&timer==0&&weap==2)cout << " \\_____________/^";
									else cout << " \\_____________/ ";}//Если щит активен
					else {if (2==f&&z==32){if(weap==1)cout << "   |         |   ";//Если щит не активен, выстрел игрока
							else cout << "   ^         ^   ";}
					else {if (1==f&&z==32&&timer==0)cout << "|                ";//Если щит не активен, выстрел по 2-ой
						else if (3==f&&z==32&&timer==0)cout << "                |";//Если щит не активен, выстрел по 3-ей
							else cout << "                 ";}}//Если щит не активен, пусто
				if (boss==3&&timer==1) cout << "     / /   ";//Если 3-я деталь(4-ое оружие) залп
				else {if (3==f&&z==32){if(weap==1)cout << "         | ";//Если выстрел по 3-ей детали
						else cout << "         ^ ";}
					else cout << "           ";}//Если пусто
				if (zpch[3]==0){if (4==f&&z==32&&timer==0){if(weap==1)cout << " |  ^^    || "<<"\n      ";//Если выстрел по 4-ой детали
						else cout << " ^  ^^    || "<<"\n      ";}
					else cout << "    ^^    || "<<"\n      ";}//Иначе
				else if (4==f&&z==32){if(weap==1)cout << " |  *     *  "<<"\n      ";//Если 4-ая разрушена, выстрел
						else cout << " ^  *     *  "<<"\n      ";}
					else cout << "    *     *  "<<"\n      ";//Если 4-ая просто разрушена
				if(boss==0&&timer==1&&zpch[0]==0)cout << " ||   /||\\   ";//Если 1-ая, залп
				else {if (0==f&&z==32){if(weap==1){if(zpch[0]==0)cout << " ||        | ";//Если по первой стреляют
							else cout << " **        | ";}//Если первая разрушена и по ней стреляют
						else {if(zpch[0]==0)cout << " ||        ^ ";
							else cout << " **        ^ ";}}
					else if(zpch[0]==0)cout << " ||          ";//Если выстрела нет, первая работает
						else cout << " **          ";}////Если выстрела нет, первая сломана
				if(boss==1&&timer==1)cout << "    \\ \\      ";//Если 2-ая стреляет
				else {if (1==f&&z==32){if(weap==1)cout << " |         | ";//Если по второй стреляют
						else cout << " ^         ^ ";}
					else cout << "             ";}//Если пусто
				if(boss==2&&timer==1){if (2==f&&z==32){if(weap==1)cout << " |   |||   | ";//Если выстрел обоюдный
						else cout << " ^   |||   ^ ";}
					else cout << "     |||     ";}//Если стреляет только третье оружие
				else {if (2==f&&z==32){if(weap==1)cout << " |         | ";//Если стреляет только игрок
						else cout << " ^         ^ ";}
					else cout << "             ";}//Если пусто
				if(boss==3&&timer==1)cout << "      / /    ";//Если стреляет 3-я деталь
				else {if (3==f&&z==32){if(weap==1)cout << " |         | ";//Если стреляют по третьей
						else cout << " ^         ^ ";}
					else cout << "             ";}//Если пусто
				if(boss==4&&timer==1&&zpch[3]==0)cout << "   /||\\   || "<<"\n      ";//Если стреляет 4-ая
				else {if (4==f&&z==32){if(weap==1){if(zpch[3]==0)cout << " |        || "<<"\n      ";//Если стреляют по 4-ой
							else cout << " |        ** "<<"\n      ";}//Если стреляют по сломанной 4-ой
						else {if(zpch[3]==0)cout << " ^        || "<<"\n      ";
							else cout << " ^        ** "<<"\n      ";}}
					else if(zpch[3]==0)cout << "          || "<<"\n      ";//Если 4-ая цела, выстрела нет
						else cout << "          ** "<<"\n      ";}//Если 4-ая сломана, выстрела нет
				if(boss==0&&timer==1&&zpch[0]==0)cout << " ||  / || \\  ";//Если стреляет 1-ая
				else {if (0==f&&z==32){if(weap==1)cout << " |         | ";//Если стреляют по 1-ой
						else cout << " ^         ^ ";}
					else cout << "             ";}//Пусто
				if(boss==1&&timer==1)cout << "     \\ \\     ";//Если стреляет 2-ая
				else {if (1==f&&z==32){if(weap==1)cout << " |         | ";//По 2-ой
						else cout << " ^         ^ ";}
					else cout << "             ";}//пусто
				if(boss==2&&timer==1){if (2==f&&z==32){if(weap==1) cout << " |   |||   | ";//3-е оружие, обоюдный
						else cout << " ^   |||   ^ ";}
					else cout << "     |||     ";}//3-е оружие
				else {if (2==f&&z==32){if(weap==1)cout << " |         | ";//залп игрока
						else cout << " ^         ^ ";}
					else cout << "             ";}//Пусто
				if(boss==3&&timer==1)cout << "     / /     ";//3-я деталь, залп
				else {if (3==f&&z==32){if(weap==1)cout << " |         | ";//по 3-ей
						else cout << " ^         ^ ";}
					else cout << "             ";}//Пусто
				if(boss==4&&timer==1&&zpch[3]==0)cout << "  / || \\  || "<<"\n      ";//4-ая
				else {if (4==f&&z==32){if(weap==1)cout << " |         | "<<"\n      ";//По 4-ой
						else cout << " ^         ^ "<<"\n      ";}
					else cout << "             "<<"\n      ";}//Пусто
//Прорисовываем корабль
				for (int i=0;i<5;i++){if(i==f){if (boss==f&&timer==1&&f==1||boss==f&&timer==1&&f==3||boss==f&&timer==1&&f==0&&zpch[0]==0||boss==f&&timer==1&&f==4&&zpch[3]==0){if(boss==0&&zpch[0]==0)cout << " || //^\\|  \\ ";//По кораблю попало первое орудие
							else if(boss==1)cout << "     /^\\\\    ";//По кораблю попало 2-ое орудие
								else if(boss==3)cout << "    //^\\     ";//4-ое
									else if(boss==4&&zpch[3]==0)cout << " /  |/^\\\\ || ";//5-ое
										else cout << "     /^\\     ";//Никто не попал
						}
						else if (z==32){if(weap==1)cout << " |   /^\\   | ";//Игрок стреляет
								else cout << " ^   /^\\   ^ ";}
							else cout << "     /^\\     ";//Не стреляет
						}
						else if (i==boss&&timer==1){if(boss==0&&zpch[0]==0)cout<< " || /  ||  \\ ";//Залп 1-ого, коробля нет
								else if(boss==1)cout<< "      \\ \\    ";//2-ого
									else if(boss==2)cout<< "     |||     ";//3-его
										else if(boss==3)cout<< "    / /      ";//4-ого
											else if(boss==4&&zpch[3]==0)cout<< " /  ||  \\ || ";//пятого
												else cout <<"             ";}//иначе
							else cout << "             ";}//иначе
				cout << "\n      ";
				for(int i=0;i<5;i++){if(i==f){if (boss==f&&timer==1&&f!=2){if(boss==0&&zpch[0]==0)cout << " ^|/ |-||  ^\\";//Дальше описывать лень
							else if(boss==1)cout << " ^   |-| \\ ^ ";//Принцип тот же
								else if(boss==3)cout << " ^ / |-|   ^ ";//Перебор возможных вариантов
									else if(boss==4&&zpch[3]==0)cout << "/^  ||-| \\|^ ";//Вплоть до окончания прорисовки коробля
										else cout << " ^   |-|   ^ ";
							}
							else if (z==32){if(weap==1)cout << "\\|/  |-|  \\|/";
									else cout << "\\^/  |-|  \\^/";}
								else cout << " ^   |-|   ^ ";
					}
					else if (i==boss&&timer==1){if(boss==0&&zpch[0]==0)cout<< " ||/   ||   \\";
							else if(boss==1)cout<< "       \\ \\   ";
								else if(boss==2)cout<< "     |||     ";
									else if(boss==3)cout<< "   / /       ";
										else if(boss==4&&zpch[3]==0)cout<< "/   ||   \\|| ";
											else cout <<"             ";}
						else cout << "             ";}
				cout << "\n      ";
				for (int i=0;i<5;i++)if (i==f)cout <<"/^\\ //^\\\\ /^\\";//Принцип тот же
					else if(timer==1){if(boss==0&&i==0&&zpch[0]==0) cout << " ||    ||    ";
						else if(boss==0&&i==1&&zpch[0]==0) cout << "\\            ";
							else if(boss==1&&i==1)cout << "        \\ \\  ";
								else if(boss==2&&i==2)cout << "     |||     ";
									else if(boss==3&&i==3)cout << "  / /        ";
										else if(boss==4&&i==3&&zpch[3]==0) cout << "            /";
											else if(boss==4&&i==4&&zpch[3]==0) cout << "    ||    || ";
												else cout <<"             ";}
						else cout <<"             "; 
				cout << "\n      ";
				for (int i=0;i<5;i++)if (i==f)cout <<"|-||-----||-|";
					else if(timer==1){if(boss==0&&i==0&&zpch[0]==0) cout << " ||    ||    ";
							else if(boss==0&&i==1&&zpch[0]==0) cout << " \\           ";
								else if(boss==1&&i==1)cout << "         \\ \\ ";
									else if(boss==2&&i==2)cout << "     |||     ";
										else if(boss==3&&i==3)cout << " / /         ";
											else if(boss==4&&i==3&&zpch[3]==0) cout << "           / ";
												else if(boss==4&&i==4&&zpch[3]==0) cout << "    ||    || ";
													else cout <<"             ";}
						else cout <<"             "; 
				cout << "\n      ";
				for (int i=0;i<5;i++)if (i==f)cout <<"| || \\^/ || |";//Принцип тот же
					else if(timer==1){if(boss==0&&i==0&&zpch[0]==0) cout << "/||    ||    ";
							else if(boss==0&&i==1&&zpch[0]==0) cout << "  \\          ";
								else if(boss==1&&i==1)cout << "          \\ \\";
									else if(boss==2&&i==2)cout << "     |||     ";
										else if(boss==3&&i==3)cout << "/ /          ";
											else if(boss==4&&i==3&&zpch[3]==0) cout << "          /  ";
												else if(boss==4&&i==4&&zpch[3]==0) cout << "    ||    ||\\";
													else cout <<"             "; }
						else cout <<"             "; 
				cout << "\n      ";
				for (int i=0;i<5;i++)if (i==f)cout <<"| || / \\ || |";//Принцип тот же
					else if(timer==1){if(boss==0&&i==0&&zpch[0]==0) cout << " ||    ||    ";
							else if(boss==0&&i==1&&zpch[0]==0) cout << "   \\         ";
								else if(boss==1&&i==1)cout << "           \\ ";
									else if(boss==1&&i==2)cout << "\\            ";
										else if(boss==2&&i==2)cout << "     |||     ";
											else if(boss==1&&i==2||boss==3&&i==2)cout << "            /";
												else if(boss==3&&i==3)cout << " /           ";
													else if(boss==4&&i==3&&zpch[3]==0) cout << "         /   ";
														else if(boss==4&&i==4&&zpch[3]==0) cout << "    ||    || ";
															else cout <<"             ";}
						else cout <<"             "; 
				cout << "\n      ";
				for (int i=0;i<5;i++)if (i==f)cout <<"| ||-----|| |";//Принцип тот же
					else if(timer==1){if(boss==0&&i==0&&zpch[0]==0) cout << " ||    ||    ";
							else if(boss==0&&i==1&&zpch[0]==0) cout << "    \\        ";
								else if(boss==1&&i==1)cout << "            \\";
									else if(boss==1&&i==2)cout << " \\           ";
										else if(boss==2&&i==2)cout << "     |||     ";
											else if(boss==1&&i==2||boss==3&&i==2)cout << "           / ";
												else if(boss==3&&i==3)cout << "/            ";
													else if(boss==4&&i==3&&zpch[3]==0) cout << "        /    ";
														else if(boss==4&&i==4&&zpch[3]==0) cout << "    ||    || ";
															else cout <<"             ";}
						else cout <<"             "; 
				cout << "\n      ";
				for (int i=0;i<5;i++)if (i==f)cout <<"|-|\\\\\\^///|-|";//Принцип тот же
					else if(timer==1){if(boss==0&&i==0&&zpch[0]==0) cout << " ||    ||    ";
							else if(boss==0&&i==1&&zpch[0]==0) cout << "     \\       ";
								else if(boss==1&&i==2)cout << "\\ \\          ";
									else if(boss==2&&i==2)cout << "     |||     ";
										else if(boss==1&&i==2||boss==3&&i==2)cout << "          / /";
											else if(boss==4&&i==3&&zpch[3]==0) cout << "       /     ";
												else if(boss==4&&i==4&&zpch[3]==0) cout << "    ||    || ";
													else cout <<"             ";}
						else cout <<"             "; 
				cout << "\n      ";
				for (int i=0;i<5;i++)if (i==f)cout <<"\\_/ |---| \\_/";//Принцип тот же
					else if(timer==1){if(boss==0&&i==0&&zpch[0]==0) cout << " ||    ||    ";
							else if(boss==0&&i==1&&zpch[0]==0) cout << "      \\      ";
								else if(boss==1&&i==2)cout << " \\ \\         ";
									else if(boss==2&&i==2)cout << "     |||     ";
										else if(boss==1&&i==2||boss==3&&i==2)cout << "         / / ";
											else if(boss==4&&i==3&&zpch[3]==0) cout << "      /      ";
												else if(boss==4&&i==4&&zpch[3]==0) cout << "    ||    || ";
													else cout <<"             ";}
						else cout <<"             "; 
				cout << "\n      ";
				for (int i=0;i<5;i++)if (i==f)cout <<" ^  \\___/  ^ ";//Принцип тот же
					else if(timer==1){if(boss==0&&i==0&&zpch[0]==0) cout << " ||    ||    ";
							else if(boss==0&&i==1&&zpch[0]==0) cout << "       \\     ";
								else if(boss==1&&i==2)cout << "  \\ \\        ";
									else if(boss==2&&i==2)cout << "     |||     ";
										else if(boss==1&&i==2||boss==3&&i==2)cout << "        / /  ";
											else if(boss==4&&i==3&&zpch[3]==0) cout << "     /       ";
												else if(boss==4&&i==4&&zpch[3]==0) cout << "    ||    || ";
													else cout <<"             ";}
						else cout <<"             "; 
				cout << "\n      ";
				for (int i=0;i<5;i++)if (i==f)cout <<"/^\\  /^\\  /^\\";//Принцип тот же
					else if(timer==1){if(boss==0&&i==0&&zpch[0]==0) cout << " ||    ||    ";
							else if(boss==0&&i==1&&zpch[0]==0) cout << "        \\    ";
								else if(boss==1&&i==2)cout << "   \\ \\       ";
									else if(boss==2&&i==2)cout << "     |||     ";
										else if(boss==1&&i==2||boss==3&&i==2)cout << "       / /   ";
											else if(boss==4&&i==3&&zpch[3]==0) cout << "    /        ";
												else if(boss==4&&i==4&&zpch[3]==0) cout << "    ||    || ";
													else cout <<"             ";}
						else cout <<"             "; 
				cout << "\n      ";
				for (int i=0;i<5;i++)if (i==f)cout <<"    /^^^\\    ";//Принцип тот же
					else if(timer==1){if(boss==0&&i==0&&zpch[0]==0) cout << " ||    ||    ";
							else if(boss==0&&i==1&&zpch[0]==0) cout << "         \\   ";
								else if(boss==1&&i==2)cout << "    \\ \\      ";
									else if(boss==2&&i==2)cout << "     |||     ";
										else if(boss==1&&i==2||boss==3&&i==2)cout << "      / /    ";
											else if(boss==4&&i==3&&zpch[3]==0) cout << "   /         ";
												else if(boss==4&&i==4&&zpch[3]==0) cout << "    ||    || ";
													else cout <<"             ";}
						else cout <<"             "; 
				cout << "\n" << "\n Жизни: " << live << "                      Жизни матки: " << zbs << "                    Э/Б/Щ: " << E << "/"<< rok << "/" << gens;//Информационная панель
				if(boss!=f||timer!=1)if(z==32&&f!=2){if(f>2)zpch[f-1]=1;//Если в деталь попали, деталь помечается сломанной
						else if(f<2)zpch[f]=1;
						u=5;}//u используется как таймер. По истечении пяти тактов 1-ая и 5-ая деталь восстанавливаются
				if(timer==0)timer++;//Таймер матки
				else timer--;
				boss=f;//Матка всегда целится в игрока. Не дура же
				time();
				if(boss==f&&timer==1&&As==0){if(f==0&&zpch[0]==0||f==4&&zpch[3]==0||f!=0&&f!=4)live--;}//Если в нас попали
				if(z==32&&f==2&&zpch[1]+zpch[2]==2)zbs-=weap;//Мы попали матке в харю
				if (u!=0)u--;//Отсчёт u
				else {zpch[0]=0;//Починка орудий
					zpch[3]=0;}
			}
			if(zpch[1]==1&&zpch[2]==1&&zbs==0){o+=1500;//ПОБЕДА НАД МАТКОЙ!!! КАК ЖЕ Я ЗАДОЛБАЛСЯ ПИСАТЬ К НЕЙ КОМЕНТЫ!!! ЕЕЕ
				cout << "Залп ваших орудий пронзает чёрную пустоту. Издав не то крик, не то металический\n";//сюжет
				cout << "  скрежет, матка, изрезанная лучами, безвольно повисает в невесомости! Жуки,   \n";
				cout << " спешащие к вам, замирают, подобно королеве. Вы обессилено падаете на кресло.  \n";
				cout << "        Это победа!!! Вы единолично остановили нашествие внеземной расы!       \n";
				cout << "                 Теперь впереди долгий и спокойный путь домой...               \n"<<"\n";
				cout << "       /|_____\\   /*\\*  *|**  /|**__________||\\**  |**  /|\\   /_**__|* " << " \n";//Рисуем разбитую матку
				cout << "      / \\\\  /**\\_/* *\\ * |***/\\||\\   /**   /||/\\* *| **/\\*/\\_/**\\  /**\\ " << " \n";
				cout << "      |**|  |\\/|  * //*  *\\_** |\\  *__*__/] /|*/\\*/_\\_/\\\\|/* |*/|  **/*" << " \n";
				cout << "      |*||  * **  |_____________/\\ \\*____/ /\\______**____*|  ||**  ||*|" << " \n";
				cout << "      **|  ||*| / */\\** **\\ \\/\\///**____*_/\\\\\\/** /^\\ \\/** \\ **||  |*|*" << " \n";
				cout << "      |||*/**|||/   * \\      * *|           |* *      * /   \\||||/**|||" << " \n";
				cout << "      \\* *  **|*                                             *|*   * **" << " \n";
				cout << "        *     *                                               *     |* " << " \n";
				cout << "       *                                                           *   " << " \n";
				_getch();//Ждём нажатия любой клавиши
			}
		}
	}
	if (live<1){//Если нас убили
		for (int i = 0; i<10; i++)cout <<"\n      ";
		for (int i=0; i<5; i++) if (i == f)cout << "     *^\\     ";//Рисуем разбитый корабль
			else cout << "             ";
		cout << "\n      ";
		for (int i=0; i<5; i++) if (i == f)cout << " ^   |-*   ^ ";
			else cout << "             ";
		cout << "\n      ";
		for (int i=0; i<5; i++) if (i == f)cout << "*^\\ */*\\\\ /^** ";
			else cout << "             ";
		cout << "\n      ";
		for (int i=0; i<5; i++) if (i == f)cout << "*-|*--**-||-*";
			else cout << "             ";
		cout << "\n      ";
		for (int i=0; i<5; i++) if (i == f)cout << "| *|***** ||*|";
			else cout << "             ";
		cout << "\n      ";
		for (int i=0; i<5; i++) if (i == f)cout << "| |* / ** ||**";
			else cout << "             ";
		cout << "\n      ";
		for (int i=0; i<5; i++) if (i == f)cout << "* |*--**||*| ";
			else cout << "             ";
		cout << "\n      ";
		for (int i=0; i<5; i++) if (i == f)cout << "*-|*\\*\\*///|*|";
			else cout << "             ";
		cout << "\n      ";
		for (int i=0; i<5; i++) if (i == f)cout << "**_/ *--*| \\*/";
			else cout << "             ";
		cout << "\n      ";
		for (int i=0; i<5; i++) if (i == f)cout << "    **__**   ";
			else cout << "             ";
		cout << "\n      "<< "\n      "<< "\n                                  ТЫ ПОГИБ:(";//Грустный смайлик обязателен. Пусть игрок знает, что разработчик раздосадован его поражением
		system("cls");
		if(BM==0){ifstream fout;//Если режим БМ не включен, отображаем рекорды, при необходимости перезаполняем их
			fout.open(r);//Открываем нужный текстовый файл
			for(int i=0; i<3; i++){fout >> man[i];//Записываем рекорды и имена в специальные переменные
			fout >> rec[i];}
			fout.close();//Закрываем файл
			if (o > rec[1]){rec[2]=rec[1];//Если игрок занял какое нибудь место, перезаписываем рекорды, вносим его в список
				strcpy(man[1],man[2]);
				if (o > rec[0]){rec[1]=rec[0];
					strcpy(man[0],man[1]);
					rec[0]=o;
					cout << "               ВЫ НАБРАЛИ " << o << " ОЧКОВ!!! ЭТО ЛУЧШИЙ РЕЗУЛЬТАТ!!! \n";
					cout << "                             ВВЕДИТЕ ИМЯ, МАСТЕР: \n";
					cin >> man[0];}
				else {rec[1]=o;
					cout << "               ВЫ НАБРАЛИ " << o << " ОЧКОВ!!! ПОЧЁТНОЕ ВТОРОЕ МЕСТО!!! \n";
					cout << "                              ВВЕДИТЕ ВАШЕ ИМЯ: \n";
					cin >> man[1];}}
			else if (o>rec[2]){rec[2]=o;
					cout << "               Вы набрали " << o << " очков. Третье место. Тоже неплохо \n";
					cout << "                              Можете ввести имя: \n";
					cin >> man[2];}
			else {cout << "                           Ты набрал " << o << " очков. Лох \n";//Хороший разработчик всегда поддержит игрока
				_getch();}//Ждём нажатия любой клавиши
			system("cls");
			cout << "                        ТАБЛИЦА РЕКОРДОВ. НАШЁЛ СЕБЯ? \n";//Выводим рекорды
			cout << "                               1. " << man[0] << " " << rec[0] << " \n";
			cout << "                               2. " << man[1] << " " << rec[1] << " \n";
			cout << "                               3. " << man[2] << " " << rec[2] << " \n";
			_getch();
			ofstream fout1(r, ios_base::trunc);//Открываем нужный файл, удаляем содержимое, записываем новые данные
			fout1 << man[0] << " " << rec[0] << " " << man[1] << " " << rec[1] << " " << man[2] << " "<< rec[2];
			fout1.close();//Закрываем файл
			Ent = 0;
		}}
	system("cls");
	u=0;
	while (Ent == 0){//Меню, которое служит... Ну, понятно, для чего
		cout << "\n                            Хочешь сыграть ещё? \n";
		if (u == 0) cout << "                                  --> Да <--\n";
		else cout << "                                      Да \n";
		if (u == 1) cout << "                                 --> Si!! <--\n";
		else cout << "                                     Si!! \n";
		if (u == 2) cout << "                                --> YES!!! <--\n";
		else cout << "                                    YES!!! \n";
		if (u == 3) cout << "                                 --> Нет( <--\n";
		else cout << "                                     Нет( \n";
		s = _getch();
		if(static_cast<int>(s) == -10 || static_cast<int>(s) == 119) u--;
		else if(static_cast<int>(s) == -5 || static_cast<int>(s) == 115) u++;//Принцип тот же, что и в главном меню
			else if(GetAsyncKeyState(VK_SPACE)) Ent++;
		if (u == 4) u--;
		if (u == -1) u++;
		system("cls");
	}
	if(u == 3)return 0;//Если мы нажали Выйти, игра выключается
}
return 0;//Уфф... Вроде всё...
}//Твою мать! Ещё же функции...
void ast(){o = o+10;//Функция генерации астероидов (ast-asteroid)
cout << "      ";
for (int i=0; i<5; i++) if (k[0][i] == 1){if (o>Slg*4+910||o<Slg*2+510){if (z==32&&i==f){if(weap==1) cout << " |   **    | ";//Множество проверок:
				else cout << " ^   **    ^ ";}//Если на этой клетке поля что то есть, если это не жук, если в него стреляют и т.п.
			else cout << "     ***     ";}//Предидущие строчки: если это астероид и в него стреляют. Эта, если не стреляют
		else {if (z==32&&i==f){if(weap==1) cout << " |    _  * | ";//Если жук и в него стреляют
				else cout << " ^    _  * ^ ";}
			else cout << "   |  _  |   ";}}//Если не стреляют
		else if (z==32&&i==f) {if(weap==1) cout << " |         | ";//Выстрел по пустой клетке
				else cout << " ^         ^ ";}
			else cout << "             ";//Если пусто
	cout << "\n      ";
	for (int i=0; i<5; i++) if (k[0][i] != 0){if (z==32&&i==f){if (o>Slg*4+910||o<Slg*2+510){if(weap==1) cout << " |    **   | ";//Принцип тот же. Добавим выпадающие бонусы
				else cout << " ^    **   ^ ";}
				else if(weap==1) cout << " ||*/* \\*/|| ";
				else cout << " ^|*/* \\*/|^ ";}
			else if (k[0][i] == 1){if (o>Slg*4+910||o<Slg*2+510)cout << "    *****    ";
			else cout << "  |\\// \\\\/|  ";}
			else if (k[0][i]==3) cout << "      _      ";//Бак с энергией
    	else if (k[0][i] == 4) cout << "    /\\/\\     ";}//Сердечки
		else if (z==32&&i==f) {if(weap==1) cout << " |         | ";
				else cout << " ^         ^ ";}
			else cout << "             ";
	cout << "\n      ";
	for (int i=0; i<5; i++) if (k[0][i] != 0){if (z==32&&i==f){if (o>Slg*4+910||o<Slg*2+510){if(weap==1) cout << " | * * * * | ";
				else cout << " ^ * * * * ^ ";}//Принцип тот же
				else if(weap==1) cout << " | \\*\\ /*/ | ";
				else cout << " ^ \\*\\ /*/ ^ ";}
			else if (k[0][i] == 1){if (o>Slg*4+910||o<Slg*2+510)cout << "   *******   ";
			else cout << "   \\|\\ /|/   ";}
			else if (k[0][i]==3) cout << "     |E|     ";
    	else if (k[0][i] == 4) cout << "    \\  /     ";}
		else if (z==32&&i==f) {if(weap==1) cout << " |         | ";
				else cout << " ^         ^ ";}
			else cout << "             ";
	cout << "\n      ";
	for (int i=0; i<5; i++) if (k[0][i] != 0){if (z==32&&i==f){if (o>Slg*4+910||o<Slg*2+510){if(weap==1) cout << " |   **    | ";
				else cout << " ^   **    ^ ";}//Принцип тот же
				else if(weap==1) cout << " | /** *\\  | ";
				else cout << " ^ /** *\\  ^ ";}
			else if (k[0][i] == 1){if (o>Slg*4+910||o<Slg*2+510)cout << "    *****    ";
			else cout << "   /\\/ \\/\\   ";}
			else if (k[0][i]==3) cout << "     |_|     ";
    	else if (k[0][i] == 4) cout << "     \\/      ";}
		else if (z==32&&i==f) {if(weap==1) cout << " |         | ";
				else cout << " ^         ^ ";}
			else cout << "             ";
	cout << "\n";
	cout << "      ";
	for (int i=0; i<5; i++) if (k[0][i] == 1){if (o>Slg*4+910||o<Slg*2+510){if (z==32&&i==f){if(weap==1)  cout << " |   * *   | ";
				else cout << " ^   * *   ^ ";}//Принцип тот же, только без бонусов
			else cout << "     ***     ";}
			else {if (z==32&&i==f){if(weap==1) cout << " | * \\*    | ";
				else cout << " ^ * \\*    ^ ";}
			else cout << "   | \\^/ |   ";}}
		else if (z==32&&i==f) {if(weap==1) cout << " |         | ";
				else cout << " ^         ^ ";}
			else cout << "             ";
	cout << "\n";
	if(z==32 && k[0][f]==1){kred = kred+5;//Если астероид подстрелили, мы его стераем и добавляем 5 кредитов
	k[0][f]=0;}
}
void kor(){cout << "      ";//Функция рисует корабль (kor - korablik)
for (int i=0; i<5; i++) if (i == f){if(z==32){if(weap==1)cout << " |   /^\\   | ";//Если корабль стреляет
			else cout << " ^   /^\\   ^ ";}
		else if (i == boss && timer == 1 && o==Slg+10||i == boss && timer == 1 && o==Slg*4+810){if (o==Slg+10) cout << "| |  /^\\ | | ";//Если пират стреляет
				else cout << "    |/^\\|    ";}//Если пчела стреояет
			else cout << "     /^\\     ";}//Иначе
	else if (o!=Slg+210 && o!=Slg*2+510 && o!=Slg*4+1310 && kv[0]==0 &&1 == k[1][i] && o!=Slg+10 && o!=Slg*2+210 && o!=Slg*4+810)if (o>Slg*4+910||o<Slg*2+510)cout << "     ***     ";//Если на поле астероид
	else cout << "   |  _  |   ";//Иначе если там жук
		else if (i == boss && timer == 1&&o==Slg+10) cout << "| |      | | ";//Иначе если пират выстрелил в пустоту
			else if (i == boss && timer == 1&&o==Slg*4+810)cout << "    |   |    ";//Иначе если жук шмальнул в пустоту
				else if (i == boss-1&&zbs != 0&&timer == 1&&o==Slg*2+210||i == boss+1&&u !=0&&timer == 1&&o==Slg*2+210)cout << "      |      ";//Иначе если бабочка ударила в пустоту
			else cout << "             ";//Иначе пустота
cout << "\n      ";
for (int i=0; i<5; i++) if (i == f){if(z==32){if(weap==1)cout << "\\|/  |-|  \\|/";//Принцип тот же + бонусы
			else cout << "\\^/  |-|  \\^/";}
		else  if (i == boss && timer == 1 && o!=Slg*2+210){if (o==Slg+10) cout << "|^|  |-| | | ";
				else cout << " ^  ||-||  ^ ";}
			else cout << " ^   |-|   ^ ";}
	else if (o!=Slg+210 && o!=Slg*2+510 && o!=Slg*4+1310 && kv[0]==0 &&o!=Slg+10 && o!=Slg*2+210 && o!=Slg*4+810 && k[1][i]==1){if (o>Slg*4+910||o<Slg*2+510)cout << "    *****    ";
			else cout << "  |\\// \\\\/|  ";}
		else if (kv[0]==0 && o!=Slg+10 && o!=Slg*2+210 && o!=Slg*4+810 && k[1][i]==3) cout << "      _      ";
    		else if (kv[0]==0 && o!=Slg+10 && o!=Slg*2+210 && o!=Slg*4+810 && k[1][i] == 4) cout << "    /\\/\\     ";
				else if (i == boss && timer == 1&&o==Slg+10) cout << "| |      | | ";
					else if (i == boss && timer == 1&&o==Slg*4+810) cout << "    |   |    ";
					else if (i == boss-1&&zbs != 0&&timer == 1&&o==Slg*2+210||i == boss+1&&u !=0&&timer == 1&&o==Slg*2+210)cout << "      |      ";
						else cout << "             ";
cout << "\n      ";
for (int i=0; i<5; i++) if (i == f)cout << "/^\\ //^\\\\ /^\\";//Принцип тот же, без выстрела игрока
	else if (o!=Slg+210 && o!=Slg*2+510 && o!=Slg*4+1310 && kv[0]==0 && o!=Slg+10 && o!=Slg*2+210 && o!=Slg*4+810 && k[1][i]==1){if (o>Slg*4+910||o<Slg*2+510)cout << "   *******   ";
			else cout << "   \\|\\ /|/   ";}
		else if (kv[0]==0 && o!=Slg+10 && o!=Slg*2+210 &&o!=Slg*4+810 && k[1][i]==3) cout << "     |E|     ";
    		else if (kv[0]==0 && o!=Slg+10 && o!=Slg*2+210 && o!=Slg*4+810 && k[1][i] == 4) cout << "    \\  /     ";
				else if (i == boss && timer == 1&&o==Slg+10) cout << "| |      | | ";
					else if (i == boss && timer == 1&&o==Slg*4+810)cout << "    |   |    ";
						else if (i == boss-1&&zbs != 0&&timer == 1&&o==Slg*2+210||i == boss+1&&u !=0&&timer == 1&&o==Slg*2+210)cout << "      |      ";
							else cout << "             ";
cout << "\n      ";
for (int i=0; i<5; i++) if (i == f)cout << "|-||-----||-|";//Принцип тот же
	else if (o!=Slg+210 && o!=Slg*2+510 && o!=Slg*4+1310 && kv[0]==0 && o!=Slg+10 && o!=Slg*2+210 && o!=Slg*4+810 && k[1][i]==1){if (o>Slg*4+910||o<Slg*2+510)cout << "    *****    ";
			else cout << "   /\\/ \\/\\   ";}
		else if (kv[0]==0 && o!=Slg+10 && o!=Slg*2+210 && o!=Slg*4+810 && k[1][i]==3) cout << "     |_|     ";
    		else if (kv[0]==0 && o!=Slg+10 && o!=Slg*2+210 && o!=Slg*4+810 && k[1][i] == 4) cout << "     \\/      ";
				else if (i == boss && timer == 1&&o==Slg+10) cout << "| |      | | ";
					else if (i == boss && timer == 1&&o==Slg*4+810)cout << "    |   |    ";
						else if (i == boss-1&&zbs != 0&&timer == 1&&o==Slg*2+210||i == boss+1&&u !=0&&timer == 1&&o==Slg*2+210)cout << "      |      ";
							else cout << "             ";
cout << "\n      ";
for (int i=0; i<5; i++) if (i == f)cout << "| || \\^/ || |";//Принцип тот же, без бонуса
	else if (o!=Slg+210 && o!=Slg*2+510 && o!=Slg*4+1310 && kv[0]==0 && 1 == k[1][i] && o!=Slg+10 && o!=Slg*2+210 && o!=Slg*4+810)if (o>Slg*4+910||o<Slg*2+510)cout << "     ***     ";
			else cout << "   | \\^/ |   ";
		else if (i == boss && timer == 1&&o==Slg+10) cout << "| |      | | ";
			else if (i == boss && timer == 1&&o==Slg*4+810)cout << "    |   |    ";
				else if (i == boss-1&&zbs != 0&&timer == 1&&o==Slg*2+210||i == boss+1&&u !=0&&timer == 1&&o==Slg*2+210)cout << "      |      ";
					else cout << "             ";
cout << "\n      ";
for (int i=0; i<5; i++) if (i == f)cout << "| || / \\ || |";//Принцип тот же
	else if (i == boss && timer == 1&&o==Slg+10) cout << "| |      | | ";
		else if (i == boss && timer == 1&&o==Slg*4+810)cout << "    |   |    ";
			else if (i == boss-1&&zbs != 0&&timer == 1&&o==Slg*2+210||i == boss+1&&u !=0&&timer == 1&&o==Slg*2+210)cout << "      |      ";
				else cout << "             ";
cout << "\n      ";
for (int i=0; i<5; i++) if (i == f)cout << "| ||-----|| |";//Принцип тот же
	else if (i == boss && timer == 1&&o==Slg+10) cout << "| |      | | ";
		else if (i == boss && timer == 1&&o==Slg*4+810)cout << "    |   |    ";
			else if (i == boss-1&&zbs != 0&&timer == 1&&o==Slg*2+210||i == boss+1&&u !=0&&timer == 1&&o==Slg*2+210)cout << "      |      ";
				else cout << "             ";
cout << "\n      ";
for (int i=0; i<5; i++) if (i == f)cout << "|-|\\\\\\^///|-|";//Принцип тот же
	else if (i == boss && timer == 1&&o==Slg+10) cout << "| |      | | ";
		else if (i == boss && timer == 1&&o==Slg*4+810)cout << "    |   |    ";
			else if (i == boss-1&&zbs != 0&&timer == 1&&o==Slg*2+210||i == boss+1&&u !=0&&timer == 1&&o==Slg*2+210)cout << "      |      ";
				else cout << "             ";
cout << "\n      ";
for (int i=0; i<5; i++) if (i == f)cout << "\\_/ |---| \\_/";//Принцип тот же
	else if (i == boss && timer == 1&&o==Slg+10) cout << "| |      | | ";
		else if (i == boss && timer == 1&&o==Slg*4+810)cout << "    |   |    ";
			else if (i == boss-1&&zbs != 0&&timer == 1&&o==Slg*2+210||i == boss+1&&u !=0&&timer == 1&&o==Slg*2+210)cout << "      |      ";
				else cout << "             ";
cout << "\n      ";
for (int i=0; i<5; i++) if (i == f)cout << " ^  \\___/  ^ ";//Принцип тот же
	else if (i == boss && timer == 1&&o==Slg+10) cout << "| |      | | ";
		else if (i == boss && timer == 1&&o==Slg*4+810)cout << "    |   |    ";
			else if (i == boss-1&&zbs != 0&&timer == 1&&o==Slg*2+210||i == boss+1&&u !=0&&timer == 1&&o==Slg*2+210)cout << "      |      ";
				else cout << "             ";
cout << "\n      ";
for (int i=0; i<5; i++) if (i == f)cout << "/^\\  /^\\  /^\\";//Принцип тот же
	else if (i == boss && timer == 1&&o==Slg+10) cout << "| |      | | ";
		else if (i == boss && timer == 1&&o==Slg*4+810)cout << "    |   |    ";
			else if (i == boss-1&&zbs != 0&&timer == 1&&o==Slg*2+210||i == boss+1&&u !=0&&timer == 1&&o==Slg*2+210)cout << "      |      ";
				else cout << "             ";
cout << "\n      ";
for (int i=0; i<5; i++) if (i == f)cout << "    /^^^\\    ";//Принцип тот же
	else if (i == boss && timer == 1&&o==Slg+10) cout << "| |      | | ";
		else if (i == boss && timer == 1&&o==Slg*4+810)cout << "    |   |    ";
			else if (i == boss-1&&zbs != 0&&timer == 1&&o==Slg*2+210||i == boss+1&&u !=0&&timer == 1&&o==Slg*2+210)cout << "      |      ";
				else cout << "             ";
if(kv[0]==0 && k[1][f]==1 && o!=Slg+10 && o!=Slg*2+210 && o!=Slg*4+810 && As == 0)live--;//Если астероид попал в корабль, а щит не действует, минус жизнь
else if(kv[0]==0 &&k[1][f]==3 && o!=Slg+10 && o!=Slg*2+210 && o!=Slg*4+810)E++;//Иначе если подцепили бак с энергией, плюс энергия
	else if(kv[0]==0 &&k[1][f]==4 && o!=Slg+10 && o!=Slg*2+210 && o!=Slg*4+810)live++;//Иначе если подцепить сердечко, плюс жизнь
if (As>0)As--;//Если время щита не нулевое, уменьшать каждый такт
if (o==Slg+10&&zbs!=100)cout << "\n Жизни: " << live << "                     Жизни пирата: " << zbs << "                    Э/Б/Щ: " << E << "/"<< rok << "/" << gens;//Если бой с пиратом, выводим это:
else if (o==Slg*2+210&&zbs!=100)cout << "\n Жизни: " << live << "       Первая бабочка: " << zbs << "      Вторая бабочка: " << u << "       Э/Б/Щ: " << E << "/"<< rok << "/" << gens;//Иначе если бой с бабочкой, это:
	else if (o==Slg*4+810&&zbs!=100)cout << "\n Жизни: " << live << "          Жизни жука: " << (zbs-1)%3+1 << "         Кол-во жуков: " << (zbs+2)/3 << "        Э/Б/Щ: " << E << "/"<< rok << "/" << gens;//Иначе если жук, это:
		else cout << "\n Жизни: " << live << "                                                        Э/Б/Щ: " << E << "/"<< rok << "/" << gens;//Иначе эту:
}
void OsMeh(){if (o<0)cout << "Кредитов: " << kred << "                 Время работы щита: " << As << "                Очки: " << 0 << " \n";//Основная механика игры
else cout << "Кредитов: " << kred << "                 Время работы щита: " << As << "                Очки: " << o << " \n";
if (k[0][0] + k[0][1] + k[0][2] + k[0][3] + k[0][4] == 0){//Если первая строка астероидов пуста
	while (k[0][0] + k[0][1] + k[0][2] + k[0][3] + k[0][4] == 0 || k[0][0] + k[0][1] + k[0][2] + k[0][3] + k[0][4] == 5){
		for (int i=0; i<5; i++)k[0][i] = rand()%2;}//Пока строка пуста или заполнена полностью, заполняем случайным образом
	h=rand()%sh;//Шанс выпадения бонуса
	if (h<5){if (rand()%2==1)k[0][h]=3;//Случайно определяем вид бонуса. 3 - энергия, 4 - жизнь
		else k[0][h]=4;}
	ast();//Генерируем первый ряд астероидов
	for (int i=0; i<6; i++)if (z!=32)cout << "\n";//На месте второго ряда, при наличии выстрела, рисуем выстрел, ниаче пустоту
		else {for (int j=0; j<f; j++) cout << "             ";
			if (weap==1)cout << "       |         | \n";
			else cout << "       ^         ^ \n";}
	kor();//Рисуем кораблик	
}
else{for (int i=0; i<5; i++)if (z!=32)cout << "\n";//Если первая строка не пуста, 
		else {for (int j=0; j<f; j++) cout << "             ";//На месте первого ряда, при наличии выстрела, рисуем выстрел, ниаче пустоту
		if (weap==1)cout << "       |         | \n";
		else cout << "       ^         ^ \n";}
	ast();//На месте второго ряда генерируем астероиды
	for (int i=0; i<5; i++)k[1][i] = 0;//Обнуляем строку 
	for (int i=0; i<5; i++)if(i!=f||z!=32) cout << "             ";//Делаем небольшой отступ
		else if (weap==1)cout << "       |         | ";
			else cout << "       ^         ^ ";
	cout << "\n";
	kor();//Выводим кораблик
	for (int i=0; i<5; i++)k[1][i] = k[0][i];//Перезаписываем данные из первой строки во вторую
	for (int i=0; i<5; i++)k[0][i]=0;//Первую обнуляем
	}
}
void time(){//Функция отвечает за смену тактов в игре паралельно с ходом игрока
int was_hit = 0;//Честно? Не представляю, как оно роботает. Кучу времени придумывал и искал такой код, едва нашёл
clock_t ev = clock();
clock_t new_ev = 0;  
while (1) {
	new_ev = clock();
	if ((new_ev - ev)/(double)CLOCKS_PER_SEC >= 0.5) {//Здесь выбираем время смены такта
		break;
	}
	if (kbhit()) {s = _getch();//Вводим букву с клавы
		was_hit = 1;
		break;}}
if (was_hit == 0) s = 'w';
was_hit = 0;
new_ev = 0;
ev = 0;//Хз, для чего всё это
z = static_cast<int>(s);//Переводим s в тип int
if (z == 97 || z == -12) f = f - 1;//Если a, сдвинуть корабль влево
if (z == 100 || z == -30) f = f + 1;//если d, вправо
if (f==5)f=0;//Если корабль ушёл за экран,
if (f==-1)f=4;//Он появляется с другой стороны
if (z == -13) z = 101;// Если E, подготовим игру для выхода
if (z == 113 || z == -23) {cout << "\n                                    ПАУЗА";//Если q, останавливаем игру, ПАУЗА
_getch();}
if (z == 99 || z == -15) if (gens > 0){gens--;//Если с, задействован щит, минус гениратор, время работы щита = 5
		As = 5;}
if (z==32){if(weap!=2 && E<1 && BM==0|| weap>1 && rok<1 && BM==0)z=0;//Если пробел, но нет боеприпасов, обнулить
	else {if (BM == 0 && weap!=2)E--;
		if(BM == 0 && weap>1)rok--;}}//Иначе минус боеприпас
system("cls");
}
void mag(){//Функция магазинов
for (int i=0;i<5;i++){k[0][i]=0;//Обнулим астероиды
	k[1][i]=0;}
Ent = 0;
u = 0;
for (int i=0;i<2;i++){kv[i] = 0;
	kv[i] = rand()%2;}//Генерируем квесты случайным образом
while (Ent == 0){//Главное меню магазина
	system("cls");
	cout << "   Вы сели на самую крупную планету системы. Перед взлётом у вас есть время    \n";
	cout << "                   посетить пару магазинов. Куда направимся? \n";
	cout << " \n";
	cout << " \n";
	if (u == 0) cout << "                       -->     Оружейный магазин     <-- \n";
	else cout << "                               Оружейный магазин \n";
	cout << " \n";
	if (u == 1) cout << "                       -->     Рынок с припасами     <-- \n";
	else cout << "                               Рынок с припасами \n";
	cout << " \n";
	if (u == 2) cout << "                       -->       Поиск работы        <-- \n";
	else cout << "                                 Поиск работы \n";
	cout << " \n";
	if (u == 3) cout << "                       -->    Взлететь с планеты     <-- \n";
	else cout << "                              Взлететь с планеты \n";
	s = _getch();
	if(static_cast<int>(s) == -10 || static_cast<int>(s) == 119) u--;
	else if(static_cast<int>(s) == -5 || static_cast<int>(s) == 115) u++;
	else if(GetAsyncKeyState(VK_SPACE)){if (u == 3) Ent++;
		else if (u == 0){
			Ent2 = 0;
			while (Ent2 == 0){//Оружейная лавка
				system("cls");
				cout << "    Перед вами крупнейший оружейный магазин на планете. Что вас интересует?    \n";
				cout << " \n";
				cout << "                           Ваше состояние: " << kred << " кредитов \n";
				cout << "                         Ваше вооружение: ";
				if (weap == 1) cout << "Лазерная турель \n";
				else if (weap == 2) cout << "Плазменная ракетница \n";
					else cout << "Пушка Гауса \n";
				cout << " \n";
				cout << "          Лазерная турель     Плазменная ракетница       Пушка Гауса        \n";
				cout << "            100 кредитов         300 кредитов           550 кредитов        \n";
				cout << "                                                                            \n";
				cout << "             _________             __________            /|------\\         \n";
				cout << "        ";
				if (u == 0) cout << "--> //___/\\___]> <-- ";
				else cout << "    //___/\\___]>     ";
				if (u == 1) cout << "-->  /_/\\__/\\___> <-- ";
				else cout << "     /_/\\__/\\___>     ";
				if (u == 2) cout << "-->  /||========== <-- ";
				else cout << "     /||==========     ";
					cout << " \n";
				cout << "           //   /  \\             //_\\/__\\/__>          /|||------/          \n";
				cout << " \n";
				if (u == 3) cout << "                                 --> Уйти <-- \n";
				else cout << "                                     Уйти \n";
				s = _getch();
				if(static_cast<int>(s) == 97 || static_cast<int>(s) == -12) u--;
				else if(static_cast<int>(s) == 100 || static_cast<int>(s) == -30) u++;
					else if(GetAsyncKeyState(VK_SPACE)){if (u == 3) Ent2++;
							else if (u == 0 && weap != 1 && kred > 99) {weap = 1;
								kred = kred - 100;
								}
								else if (u == 1 && weap != 2 && kred > 299) {weap = 2;
									kred = kred - 300;
									}
									else if (u == 2 && weap != 3 && kred > 549) {weap = 3;
										kred = kred - 550;
										}
						}
				if (u == 4) u = 0;
				if (u == -1) u = 3;
			}
			u = 0;
		}
	else if (u == 1){
		Ent2 = 0;
		while (Ent2 == 0){//Рынок припасов
			system("cls");
			cout << "    Перед вами крупнейший рынок с припасами на планете. Что вас интересует?    \n";
			cout << " \n";
			cout << "                                Ваше состояние:";
			cout << " \n";
			cout << "                                  Кредиты: " << kred << " \n";
			cout << "                                   Жизни: " << live << " \n";
			cout << "                                  Энергия: " << E << " \n";
			cout << "                                  Боеприпасы: " << rok << " \n";
			cout << "                                Генираторы щитов: " << gens << " \n";
			cout << " \n";
			cout << "                Энергия     Боезапас     Ремонт    Гениратор щита\n";
			cout << "              25 кредитов 50 кредитов  25 кредитов  100 кредитов \n";
			cout << "                                                        ___ \n";
			cout << "                   _           ^          /\\/\\         / | \\ \n";
			if (u == 0) cout << "              --> |E| <-- ";
			else cout << "                  |E|     ";
			if (u == 1) cout << "--> |^| <-- ";
			else cout << "    |^|     ";
			if (u == 2) cout << "--> \\  / <-- ";
			else cout << "    \\  /     ";
			if (u == 3) cout << "--> |-+-| <-- \n";
			else cout << "    |-+-|     \n";
			cout << "                  |_|         |^|          \\/          \\_|_/ \n";
			cout << " \n";
			if (u == 4) cout << "                                 --> Уйти <-- \n";
			else cout << "                                     Уйти \n";
			s = _getch();
			if(static_cast<int>(s) == 97 || static_cast<int>(s) == -12) u--;
			else if(static_cast<int>(s) == 100 || static_cast<int>(s) == -30) u++;
				else if(GetAsyncKeyState(VK_SPACE)){if (u == 4) Ent2++;
						else if (u == 0 && kred > 24) {kred = kred - 50;
							E = E + 5;
							}
							else if (u == 1 && kred > 49) {kred = kred - 50;
								rok = rok + 5;
								}
								else if (u == 2 && kred > 24) {kred = kred - 25;
									live++;
									}
									else if (u == 3 && kred > 99) {kred = kred - 100;
										gens++;
										}
					}
			if (u == 5) u = 0;
			if (u == -1) u = 4;
		}
		u = 0;
	}
	else if (u == 2){u = 0;
			Ent2 = 0;
			while (Ent2 == 0){//Контракты
				system("cls");
				cout << " Вы просматриваете объявления о найме коробля. Кое что кажется вам интересным: \n";
				cout << " \n";
				cout << " \n";
				if (u == 0) cout << "                       -->    Закончить с поиском    <-- \n";
				else cout << "                              Закончить с поиском \n";
				cout << " \n";
				if (kv[0] == 1){if (u == 1) cout << "                       -->    Охота на преступника   <-- \n";
					else cout << "                              Охота на преступника \n";
					cout << " \n";}
				if (kv[1] == 1){if (u == 2) cout << "                       -->     Доставка посылки    <-- \n";
					else cout << "                               Доставка посылки \n";}
				s = _getch();
				if(static_cast<int>(s) == -10 || static_cast<int>(s) == 119){u--;
					if (kv[1] == 1 && kv[0] == 0) {if (u == 1) u = 0;}}
				else if(static_cast<int>(s) == -5 || static_cast<int>(s) == 115){u++;
					if (kv[1] == 1 && kv[0] == 0) {if (u == 1) u = 2;}}
					else if(GetAsyncKeyState(VK_SPACE)){if (u == 0) Ent2++;
							else if (u == 1) {system("cls");//Первый контракт
									cout << "\n" << "\n" << "\n";
									cout << "    Ваш контракт: поймать вора, укравшего новейший сверхсветовой двигатель     \n";//Обьясняем правила
									cout << "                     Противник слаб, но быстр и манёвренен                     \n";
									cout << "          Сбейте его с трёх выстрелов, чтобы заработать 200 кредитов           \n";
									_getch();
									boss = 2;//Положение и здоровье босса
									zbs = 1;
									if (weap == 1||weap == 3){re[0]= E;
										E = 3;}//Даём игроку три выстрела, ограничевая боезапас
									if (weap == 2||weap == 3){re[1] = rok;
										rok = 3;}//Припасы игрока сохраняем в резервных переменных}
									while (zbs > 0 && z != 101){system("cls");
										cout << "Кредитов: " << kred << "                 Время работы щита: " << As << "                Очки: " << o << " \n"; //Выводим информационную панельку
										cout << "      ";
										for (int i=0; i != 5; i++)if (i == boss)cout << "      ^      ";//Выводим противника. Система простая
											else if (i == f && z == 32 ) if (weap == 1)cout << " |         | ";//Если есть противник, выводим его
													else cout << " ^         ^ ";//Иначе, если есть выстрел игрока, выводим его
												else cout << "             ";//Иначе пусто
										cout << "\n      ";
										for (int i=0; i != 5; i++)if (i == boss)cout << "     /^\\     ";//Тот же принцип
											else if (i == f && z == 32 ) if (weap == 1)cout << " |         | ";
													else cout << " ^         ^ ";
												else cout << "             ";
										cout << "\n      ";
										for (int i=0; i != 5; i++)if (i == boss)cout << "   /\\***/\\   ";//Тот же принцип
											else if (i == f && z == 32 ) if (weap == 1)cout << " |         | ";
													else cout << " ^         ^ ";
												else cout << "             ";
										cout << "\n      ";
										for (int i=0; i != 5; i++)if (i == boss)cout << "  /*|---|*\\  ";//Тот же принцип
											else if (i == f && z == 32 ) if (weap == 1)cout << " |         | ";
													else cout << " ^         ^ ";
												else cout << "             ";
										cout << "\n      ";
										for (int i=0; i != 5; i++)if (i == boss)cout << " /|*|---|*|\\ ";//Тот же принцип
											else if (i == f && z == 32 ) if (weap == 1)cout << " |         | ";
													else cout << " ^         ^ ";
												else cout << "             ";
										cout << "\n      ";
										for (int i=0; i != 5; i++)if (i == boss)cout << " ||*|---|*|| ";//Тот же принцип
											else if (i == f && z == 32 ) if (weap == 1)cout << " |         | ";
													else cout << " ^         ^ ";
												else cout << "             ";
										cout << "\n      ";
										for (int i=0; i != 5; i++)if (i == boss)cout << " ||\\|---|/|| ";//Тот же принцип
											else if (i == f && z == 32 ) if (weap == 1)cout << " |         | ";
													else cout << " ^         ^ ";
												else cout << "             ";
										cout << "\n      ";
										for (int i=0; i != 5; i++)if (i == boss)cout << " ||/\\___/\\|| ";//Тот же принцип
											else if (i == f && z == 32 ) if (weap == 1)cout << " |         | ";
													else cout << " ^         ^ ";
												else cout << "             ";
										cout << "\n      ";
										for (int i=0; i != 5; i++)if(f!=i||z!=32)cout << "             ";//То же самое, но без противника
											else if (weap == 1)cout << " |         | ";
											else cout << " ^         ^ ";
												cout << "\n      ";
										for (int i=0; i != 5; i++)if(f!=i||z!=32)cout << "             ";//Тот же принцип
											else if (weap == 1)cout << " |         | ";
											else cout << " ^         ^ ";
											cout << "\n";
										kor();//Кораблик
										time();//Ход игрока
										u++;//Механика босса
										if (u > 2) u++;
										if (u < 3)boss++;
										else boss--;
										if (u == 4) u = 0;
										if (boss == 5) boss = 0;//Позволяем боссу "прыгать" с одной стороны экрана на другую
										if (boss == -1) boss = 4;
										if (f == boss && z == 32)zbs -= weap;//Если врага подбили, минус хп
										if (weap == 1 && E == 0 || weap == 2 && rok == 0 || weap == 3 && E == 0 && rok == 0) z = 101;//Если боеприпасов нет
									}
									system("cls");
									if (z != 101){cout << "Кредитов: " << kred << "                 Время работы щита: " << As << "                Очки: " << o << " \n"; //Если противника победили
										cout << "\n      " << "\n      ";
										for (int i=0; i != 5; i++)if (i == boss)cout << "     *\\     ";//Рисуем подбитого босса
											else if (i == f && z == 32 ) if (weap == 1)cout << " |         | ";//Принцип тот же, что и выше
													else cout << " ^         ^ ";
												else cout << "             ";
										cout << "\n      ";
											for (int i=0; i != 5; i++)if (i == boss)cout << "    \\** *\\   ";
											else if (i == f && z == 32 ) if (weap == 1)cout << " |         | ";
													else cout << " ^         ^ ";
												else cout << "             ";
										cout << "\n      ";
										for (int i=0; i != 5; i++)if (i == boss)cout << "  /*|-**|*\\  ";
											else if (i == f && z == 32 ) if (weap == 1)cout << " |         | ";
													else cout << " ^         ^ ";
												else cout << "             ";
										cout << "\n      ";
										for (int i=0; i != 5; i++)if (i == boss)cout << " *  *  -|*|* ";
											else if (i == f && z == 32 ) if (weap == 1)cout << " |         | ";
													else cout << " ^         ^ ";
												else cout << "             ";
										cout << "\n      ";
										for (int i=0; i != 5; i++)if (i == boss)cout << "  |*|*-   || ";
											else if (i == f && z == 32 ) if (weap == 1)cout << " |         | ";
													else cout << " ^         ^ ";
												else cout << "             ";
										cout << "\n      ";
										for (int i=0; i != 5; i++)if (i == boss) cout << " *|  -*-|/ |  ";
											else if (i == f && z == 32 ) if (weap == 1)cout << " |         | ";
													else cout << " ^         ^ ";
												else cout << "             ";
										cout << "\n      ";
										for (int i=0; i != 5; i++)if (i == boss)cout << " |*/    */|| ";
											else if (i == f && z == 32 ) if (weap == 1)cout << " |         | ";
													else cout << " ^         ^ ";
												else cout << "             ";
										cout << "\n      ";
										for (int i=0; i != f; i++)cout << "             ";
										if (weap == 1)cout << " |         | ";
										else cout << " ^         ^ ";
										cout << "\n      ";
										for (int i=0; i != f; i++)cout << "             ";
										if (weap == 1)cout << " |         | ";
										else cout << " ^         ^ ";
										cout << "\n";
										kor();//Корабль
										_getch();//Ждём любой клавиши
										system("cls");
										cout << "\n"<<"\n"<<"\n"<<"\n"<<"\n";
										cout << "                 Задание выполнено. Вы возвращаетесь на планету                ";
										kred = kred + 200;//Награда
										u = 1;
										_getch();//Ждём любой клавиши
									}
									else if (weap == 1 && E == 0 || weap == 2 && rok == 0 || weap == 3 && E == 0 && rok == 0) {cout << "                   Задание провалено. Вы возвращаетесь нисчем                  ";//Иначе
										_getch();}//Ждём любой клавиши
									if (weap == 1||weap == 3)E = re[0];//Возвращаем сохранённые боеприпасы
									if (weap == 2||weap == 3)rok = re[1];
									z = 0;
									kv[0]= 0;//Заканчиваем квест
									u = 1;
									zbs=100;
								}
								else if (u == 2) {system("cls");//Второй контракт
										cout << "\n"<<"\n"<<"\n";
										cout << "              Ваш контракт: доставить посылку на соседнюю планету              \n";//Обьясняем правила
										cout << "                Посылка хрупка, любое столкновение ей повредит                 \n";
										cout << "   Наберите 250 очков, не получив повреждений, чтобы заработать 200 кредитов   \n";
										_getch();//Ждём любой клавиши
										re[0] = live;//Сохраняем очки и жизни в резерв
										live = 1;
										re[1] = o;
										o = 0;
										while(o < 260 && live != 0){system("cls");//Та же механика, что и в основной программе
											OsMeh();
											time();}
										system("cls");
										if (o == 260){cout << "                 Задание выполнено. Вы возвращаетесь на планету                ";//При выйгрыше
											kred = kred + 200;}//Награда
										else cout << "                   Задание провалено. Вы возвращаетесь нисчем                  ";//При проигрыше
										live = re[0];//Возвращаем сохранённые значения
										o = re[1];
										_getch();//Ждём любой клавиши
										kv[1] = 0;
										u = 1;
									}
						}
						if (kv[0] == 1 && kv[1] == 1){if (u == 3) u--;}//Выбор пунктов в меню
						else if (kv[0] == 1 && kv[1] == 0) {if (u == 2) u--;}
							else if (kv[1] == 1 && kv[0] == 0) {if (u == 3)u--;}
								else u = 0;
						if (u == -1) u++;
			}
		}
	}
	if (u == 4) u--;//Не даём каретке выйти за границы
	if (u == -1) u++;
	}
kv[0]=0;
}
void sist(){system("cls");
	if(o==-20){cout << "Система Нэва. Это начало вашего пути. Она известна опасным поясом астероидов и \n";//Сюжет (в зависимости от системы)
		cout << " большой интенсивностью пиратских нападений. Впрочем близость войны, вероятно, \n";
		cout << "        отталкнула большинство бандитов. И всё таки, будте осторожны... \n"<<"\n"<<"\n";}
	else if(o==Slg+210){cout << "На планете вы смогли немного отремонтировать корабль и подзарядить батарею. Так\n";
		cout << " же вы узнали, что прямым попаданием в клещи матки, их можно ненадолго вывести \n";
		cout << " из строя. Это пригодится. А вы тем временем направляетесь к следующей системе.\n";
		cout << "  Система Горм. Так же имеет пояс астероидов, однако благодоря этому почти не  \n";
		cout << "пострадала от нашествия. Однако стоит опасаться одиноких короблей. Будте начеку\n";}
	else if(o==Slg*2+510){cout << "Как всегда, вы подлотали судно, подзарядили акумуляторы и получили информацию. \n";   
		cout << "Щупольца матки генерируют какой то... щит. Через него придётся пробиваться. Вы \n";
		cout << " направляетесь дальше. Система Нюрей-зо подверглась нападению давно. Вероятно, \n";
		cout << "                   вас ожидают толпы Жуков. Будте осторожны!                   \n"<<"\n";}
	else if(o==Slg*4+1310){cout << "Вы едва уцелели после боя. Однако планета под защитой. Подремонтировавшись, вы \n";
		cout << "готовитесь лететь в свой последний бой. На планете вы узнали, что три попадания\n";
		cout << "в голову матки теоритически могут её уничтожить. Остаётся надеятся, что это так\n"<<"\n"<<"\n";}
		cout << "\n"<<"\n"<<"\n";
	if (o==Slg*2+510) cout << "                                > () < - - - \n";//Рисуем типо карту)))
	else cout << "                                  () - - - - \n";
	if (o==Slg*4+1310) cout << "                                /            \\       - - > () < \n";
	else cout << "                                /            \\       - - - () \n";
	if (o==-20) cout << "               > () <         /                \\   / \n";
	else cout << "                 ()           /                \\   / \n";
	if (o==Slg*3+610) cout << "                   \\        /                  > () < \n";
	else cout << "                   \\        /                    () \n";
	if (o==Slg+210) cout << "                     - > () < \n";
	else cout << "                     - - () \n";
	_getch();//Ждём любой клавиши
	E = E+5;
	live++;//Пополнение припасов при посещении планеты
	system("cls");
}
void ftl(){//Функция обыска короблей
u = 1;
Ent = 0;
while (Ent == 0){
	system("cls");
	cout << "          Среди обломков коробля-противника виднеются ценные ресурсы           \n";//Выбираем, обыскивать ли корабль
	cout << "               Будем марадёрствовать? (корабль может пострадать)               \n";
	cout << " \n";
	cout << " \n";
	if (u == 1) cout << "                       -->     Обчистить корабль     <-- \n";
	else cout << "                               Обчистить корабль \n";
	cout << " \n";
	if (u == 2) cout << "                       -->    Не рисковать судном    <-- \n";
	else cout << "                              Не рисковать судном \n";
	s = _getch();
	if(static_cast<int>(s) == -10 || static_cast<int>(s) == 119) u--;
	else {if(static_cast<int>(s) == -5 || static_cast<int>(s) == 115) u++;
		else if(GetAsyncKeyState(VK_SPACE)) Ent++;}
	if (u == 3) u--;
	if (u == 0) u++;
}
if (u == 1) {u = rand()%(sh/25);//Если таки обыскиваем, то с некоторым шансом (зависит от сложности)
	if (u == 0) {cout << " \n";
		cout << " \n";
		cout << " \n";
		cout << "   При вашем приближении корабль развалился. Вас зацепило обломками. -2 жизни  ";//Отнимаем жизнь
		live = live - 2;
		_getch();
	}
	else {cout << " \n";
		cout << " \n";
		cout << " \n";
		cout << "      Вы смогли добыть 200 кредитов и пару боеприпасов. Но риск был велик      ";//Или добавляем кредитов и ракет
		kred = kred + 200;
		rok = rok + 2;
		_getch();
	}
}
}//Уф... Теперь точно всё
